/*! HSO D365 CLI 4.0.1 | (c) HSO Innovation */(()=>{"use strict";var e={427:function(e,r,t){var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(o,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function l(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(s,l)}c((n=n.apply(e,r||[])).next())}))},o=this&&this.__generator||function(e,r){var t,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=r.call(e,s)}catch(e){a=[6,e],n=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.Resx=void 0;var a=t(524),s=t(747),l=t(589),c=function(){function e(){}return e.extract=function(){return n(this,void 0,void 0,(function(){var r;return o(this,(function(t){switch(t.label){case 0:return(r=e.getCodeKeys()).length>0&&e.addLocalesFile(),[4,e.processCodeKeys(r)];case 1:return t.sent(),[2,null]}}))}))},e.getCodeKeys=function(){for(var r=new Set,t=0,n=a.ls("src/**/*.ts*");t<n.length;t++)for(var o=n[t],l=String(s.readFileSync(o)),c=null;null!==(c=e.regex.exec(l));)c.index===e.regex.lastIndex&&(e.regex.lastIndex+=1),r.add(c[2]||c[3]);return Array.from(r.values())},e.addLocalesFile=function(){a.test("-d","src/translation/locales")||a.mkdir("src/translation/locales"),a.test("-f","src/translation/locales/locales.resx")||(a.cp("-R",__dirname+"/locales.resx","./src/translation/locales"),a.exec("git add src/translation/locales/locales.resx")),a.test("-f","src/translation/locales/locales.1033.resx")||(a.cp("-r",__dirname+"/locales.resx","./src/translation/locales/locales.1033.resx"),a.exec("git add src/translation/locales/locales.1033.resx"))},e.processCodeKeys=function(r){return n(this,void 0,void 0,(function(){var t,n,s,l,c;return o(this,(function(o){switch(o.label){case 0:t=a.ls("src/translation/locales/*.resx"),n=0,s=t,o.label=1;case 1:return n<s.length?(l=s[n],[4,e.getResxDocument(l)]):[3,4];case 2:c=o.sent(),e.processXmlDoc(c,r),e.writeXmlDoc(c,l),o.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.getResxDocument=function(e){var r=String(s.readFileSync(e));return l.parseStringPromise(r)},e.processXmlDoc=function(e,r){for(var t=e.root.data.map((function(e){return e.$.name})),n=function(t){if(!r.includes(t)){var n=e.root.data.find((function(e){return e.$.name===t})),o=e.root.data.indexOf(n);e.root.data.splice(o,1),console.log("remove "+t)}},o=0,a=t;o<a.length;o++){n(a[o])}for(var s=0,l=r;s<l.length;s++){var c=l[s];t.includes(c)||(e.root.data.push({$:{name:c,"xml-space":"preserve"},value:[c]}),console.log("add "+c))}},e.writeXmlDoc=function(e,r){var t=(new l.Builder).buildObject(e);a.ShellString(t).to(r)},e.regex=/Translation\.translate\([\s]*([']([^']*)[']|[`]([^`]*)[`])[\s]*\)/gm,e}();r.Resx=c,c.extract()},747:e=>{e.exports=require("fs")},524:e=>{e.exports=require("shelljs")},589:e=>{e.exports=require("xml2js")}},r={};!function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{}};return e[n].call(o.exports,o,o.exports,t),o.exports}(427)})();