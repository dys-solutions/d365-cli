/*! HSO D365 CLI 3.0.0 | (c) HSO Innovation */(()=>{"use strict";var e={427:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,l)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=s.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Resx=void 0;var o=r(524),s=r(747),l=r(589),c=function(){function e(){}return e.extract=function(){return n(this,void 0,void 0,(function(){var t;return a(this,(function(r){switch(r.label){case 0:return(t=e.getCodeKeys()).length>0&&e.addLocalesFile(),[4,e.processCodeKeys(t)];case 1:return r.sent(),[2,null]}}))}))},e.getCodeKeys=function(){for(var t=new Set,r=0,n=o.ls("src/**/*.ts*");r<n.length;r++)for(var a=n[r],l=String(s.readFileSync(a)),c=null;null!==(c=e.regex.exec(l));)c.index===e.regex.lastIndex&&(e.regex.lastIndex+=1),t.add(c[2]||c[3]);return Array.from(t.values())},e.addLocalesFile=function(){o.test("-d","src/translation/locales")||o.mkdir("src/translation/locales"),o.test("-f","src/translation/locales/locales.resx")||(o.cp("-R",__dirname+"/locales.resx","./src/translation/locales"),o.exec("git add src/translation/locales/locales.resx")),o.test("-f","src/translation/locales/locales.1033.resx")||(o.cp("-r",__dirname+"/locales.resx","./src/translation/locales/locales.1033.resx"),o.exec("git add src/translation/locales/locales.1033.resx"))},e.processCodeKeys=function(t){return n(this,void 0,void 0,(function(){var r,n,s,l,c;return a(this,(function(a){switch(a.label){case 0:r=o.ls("src/translation/locales/*.resx"),n=0,s=r,a.label=1;case 1:return n<s.length?(l=s[n],[4,e.getResxDocument(l)]):[3,4];case 2:c=a.sent(),e.processXmlDoc(c,t),e.writeXmlDoc(c,l),a.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.getResxDocument=function(e){var t=String(s.readFileSync(e));return l.parseStringPromise(t)},e.processXmlDoc=function(e,t){for(var r=e.root.data.map((function(e){return e.$.name})),n=function(r){if(!t.includes(r)){var n=e.root.data.find((function(e){return e.$.name===r})),a=e.root.data.indexOf(n);e.root.data.splice(a,1)}},a=0,o=r;a<o.length;a++){n(o[a])}for(var s=0,l=t;s<l.length;s++){var c=l[s];r.includes(c)||e.root.data.push({$:{name:c,"xml-space":"preserve"},value:[c]})}},e.writeXmlDoc=function(e,t){var r=(new l.Builder).buildObject(e);o.ShellString(r).to(t)},e.regex=/Translation\.translate\([\s]*([']([^']*)[']|[`]([^`]*)[`])[\s]*\)/gm,e}();t.Resx=c,c.extract()},747:e=>{e.exports=require("fs")},524:e=>{e.exports=require("shelljs")},589:e=>{e.exports=require("xml2js")}},t={};!function r(n){if(t[n])return t[n].exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}(427)})();